<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="calculator">
        <input type="text" id="input_display" disabled>

        <div class="buttons">
            <button onclick="pressNumber('7')">7</button>
            <button onclick="pressNumber('8')">8</button>
            <button onclick="pressNumber('9')">9</button>
            <button onclick="pressOperator('/')">/</button>
            <br>
            <button onclick="pressNumber('4')">4</button>
            <button onclick="pressNumber('5')">5</button>
            <button onclick="pressNumber('6')">6</button>
            <button onclick="pressOperator('*')">*</button>
            <br>
            <button onclick="pressNumber('1')">1</button>
            <button onclick="pressNumber('2')">2</button>
            <button onclick="pressNumber('3')">3</button>
            <button onclick="pressOperator('-')">-</button>
            <br>
            <button onclick="pressNumber('0')">0</button>
            <button onclick="pressNumber('.')">.</button>
            <button onclick="calculateResult()">=</button>
            <button onclick="pressOperator('+')">+</button>
            <br>
            <button onclick="clearCalculator()">C</button>
            <button onclick="deleteCharacter()">Del</button>
        </div>
    </div>

    <script>
        let previousOperand = "";
        let currentOperand = "";
        let selectedOperator = "";
        let fullDisplayString = ""; 

        const displayElement = document.getElementById("input_display");
        function updateDisplay() {
            displayElement.value = fullDisplayString;
        }
        function pressNumber(number) {
            if (number === "." && currentOperand.includes(".")) return;
            
            currentOperand += number;
            fullDisplayString += number;
            updateDisplay();
        }
function pressOperator(operator) {
            if (currentOperand === "" && previousOperand === "") return;

            if (currentOperand === "" && fullDisplayString !== "") {
                fullDisplayString = fullDisplayString.slice(0, fullDisplayString.length - 1) + operator;
                selectedOperator = operator;
                updateDisplay();
                return;
            }

            if (previousOperand === "") {
                previousOperand = currentOperand;
            } else {
                previousOperand = calculateOperation(previousOperand, currentOperand, selectedOperator);
            }

            selectedOperator = operator;
            currentOperand = "";
            fullDisplayString = previousOperand + selectedOperator;
            updateDisplay();
        }
 function deleteCharacter() {
            if (fullDisplayString === "") return;

            let lastCharacter = fullDisplayString.charAt(fullDisplayString.length - 1);
            fullDisplayString = fullDisplayString.slice(0, fullDisplayString.length - 1);

            if (lastCharacter === "+" || lastCharacter === "-" || lastCharacter === "*" || lastCharacter === "/") {
                selectedOperator = "";
                currentOperand = previousOperand; 
                previousOperand = "";
            } else {
                if (currentOperand !== "") {
                    currentOperand = currentOperand.slice(0, currentOperand.length - 1);
                } 
                else if (previousOperand !== "") {
                    previousOperand = previousOperand.slice(0, previousOperand.length - 1);
                }
            }
            updateDisplay();
        }
  function calculateOperation(firstOperandString, secondOperandString, operator) {
            let firstOperand = parseFloat(firstOperandString);
            let secondOperand = parseFloat(secondOperandString);
            if (isNaN(firstOperand) || isNaN(secondOperand)) return "Error"; 
            let result = 0;
            if (operator === "+") result = firstOperand + secondOperand;
            if (operator === "-") result = firstOperand - secondOperand;
            if (operator === "*") result = firstOperand * secondOperand;
            if (operator === "/") {
                if (secondOperand === 0) return "Error"; 
                result = firstOperand / secondOperand;
            }
            return result.toString();
        }
        function calculateResult() {
            if (previousOperand === "" || currentOperand === "" || selectedOperator === "") return;
            
            let finalResult = calculateOperation(previousOperand, currentOperand, selectedOperator);
            fullDisplayString = finalResult; 
            updateDisplay();

            previousOperand = "";
            currentOperand = finalResult; 
            selectedOperator = "";
        }
        function clearCalculator() {
            previousOperand = "";
            currentOperand = "";
            selectedOperator = "";
            fullDisplayString = "";
            updateDisplay();
        }
        updateDisplay();
    </script>
</body>
</html>