<!DOCTYPE html>
<html>
<head>
    <title>Person Profile</title>
    <script>
        function isLetter(ch) {
            return (ch >= 'A' && ch <= 'Z') || (ch >= 'a' && ch <= 'z');
        }

        function isAllowedNameChar(ch) {
            return isLetter(ch) || ch === '.' || ch === '-' || ch === ' ';
        }

        function validateProfile() {
            let error = document.getElementById("error");
            error.innerHTML = "";

            let name = document.getElementById("name").value;
            if (name.trim() === "") {
                error.innerHTML = "Name cannot be empty.";
                return false;
            }
            let parts = name.split(" ");
            let wc = 0;
            for (let i = 0; i < parts.length; i++) {
                if (parts[i] !== "") wc++;
            }
            if (wc < 2) {
                error.innerHTML = "Name must contain at least two words.";
                return false;
            }
            let p = 0;
            while (p < name.length && name[p] === " ") p++;
            if (!isLetter(name[p])) {
                error.innerHTML = "Name must start with a letter.";
                return false;
            }
            for (let j = 0; j < name.length; j++) {
                if (!isAllowedNameChar(name[j])) {
                    error.innerHTML = "Invalid character in name.";
                    return false;
                }
            }

            let email = document.getElementById("email").value;
            if (email.trim() === "") {
                error.innerHTML = "Email cannot be empty.";
                return false;
            }
            let at = email.indexOf("@");
            let dot = email.lastIndexOf(".");
            if (at <= 0 || dot <= at + 1 || dot === email.length - 1) {
                error.innerHTML = "Invalid email.";
                return false;
            }
            for (let i = 0; i < email.length; i++) {
                if (email[i] === " ") {
                    error.innerHTML = "Email cannot contain spaces.";
                    return false;
                }
            }

            let genders = document.getElementsByName("gender");
            let g = false;
            for (let i = 0; i < genders.length; i++) {
                if (genders[i].checked) g = true;
            }
            if (!g) {
                error.innerHTML = "Select gender.";
                return false;
            }

            let dd = document.getElementById("dd").value;
            let mm = document.getElementById("mm").value;
            let yy = document.getElementById("yy").value;
            if (dd === "" || mm === "" || yy === "") {
                error.innerHTML = "DOB fields cannot be empty.";
                return false;
            }
            let d = parseInt(dd), m = parseInt(mm), y = parseInt(yy);
            if (isNaN(d) || isNaN(m) || isNaN(y)) {
                error.innerHTML = "DOB must be numbers.";
                return false;
            }
            if (d < 1 || d > 31 || m < 1 || m > 12 || y < 1900 || y > 2016) {
                error.innerHTML = "Invalid DOB.";
                return false;
            }

            let bg = document.getElementById("bg").value;
            if (bg === "") {
                error.innerHTML = "Select blood group.";
                return false;
            }

            let degrees = document.getElementsByName("degree");
            let ds = false;
            for (let i = 0; i < degrees.length; i++) {
                if (degrees[i].checked) ds = true;
            }
            if (!ds) {
                error.innerHTML = "Select degree.";
                return false;
            }

            let photo = document.getElementById("photo").value;
            if (photo === "") {
                error.innerHTML = "Select a photo.";
                return false;
            }

            return true;
        }
    </script>
</head>
<body>

<h2 style="text-align:center;">PERSON PROFILE</h2>

<form action="success.html" onsubmit="return validateProfile();">

    <table border="1" cellspacing="0" cellpadding="8" style="width: 500px; border-collapse: collapse;">
        <tr>
            <td>Name</td>
            <td><input type="text" id="name" style="width: 250px;"></td>
        </tr>

        <tr>
            <td>Email</td>
            <td><input type="text" id="email" style="width: 250px;"></td>
        </tr>

        <tr>
            <td>Gender</td>
            <td>
                <input type="radio" name="gender" value="Male"> Male
                <input type="radio" name="gender" value="Female"> Female
                <input type="radio" name="gender" value="Other"> Other
            </td>
        </tr>

        <tr>
            <td>Date of Birth</td>
            <td>
                <input type="text" id="dd" size="2"> /
                <input type="text" id="mm" size="2"> /
                <input type="text" id="yy" size="4">
                (dd/mm/yyyy)
            </td>
        </tr>

        <tr>
            <td>Blood Group</td>
            <td>
                <select id="bg">
                    <option value="">Select</option>
                    <option>A+</option>
                    <option>A-</option>
                    <option>B+</option>
                    <option>B-</option>
                    <option>O+</option>
                    <option>O-</option>
                    <option>AB+</option>
                    <option>AB-</option>
                </select>
            </td>
        </tr>

        <tr>
            <td>Degree</td>
            <td>
                <input type="checkbox" name="degree" value="SSC"> SSC
                <input type="checkbox" name="degree" value="HSC"> HSC
                <input type="checkbox" name="degree" value="BSc"> BSc.
                <input type="checkbox" name="degree" value="MSc"> MSc.
            </td>
        </tr>

        <tr>
            <td>Photo</td>
            <td><input type="file" id="photo"></td>
        </tr>

        <tr>
            <td colspan="2" style="height:40px;"></td>
        </tr>

        <tr>
            <td colspan="2" style="text-align:right;">
                <input type="submit" value="Submit">
                <input type="reset" value="Reset">
            </td>
        </tr>
    </table>

    <br>
    <span id="error" style="color:red;"></span>

</form>

</body>
</html>
